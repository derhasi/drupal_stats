<?php
// $Id$

/**
 * @file
 *   information for install, update and enable stats
 */

/**
 * Implementation of hook_install().
 */
function stats_queue_install(){
  drupal_install_schema('stats_queue');
}

/**
 * Implementation of hook_uninstall().
 */
function stats_queue_uninstall(){
  drupal_uninstall_schema('stats_queue');
}

/**
 * Implementation of hook_schema().
 */
function stats_queue_schema() {
  return array(
    'stats_queue' => array(
      'fields' => array(
        'id' => array(
          'description' => 'Id of the queue entry, to ensure correct order.',
          'type' => 'serial',
          'unsigned' => TRUE,
          'not null' => TRUE,
        ),
        'type' => array(
          'type' => 'varchar',
          'length' => 60,
          'not null' => TRUE,
          'default' => '',
          'description' => 'Type of stats value',
        ),
        'subject' => array(
          'description' => 'one subject to get calculated - may be serialized',
          'type' => 'text',
          'size' => 'normal',
          'not null' => FALSE,
          'serialize' => TRUE,
        ),
        'addition' => array(
          'description' => 'one optional addition to get calculated with subject',
          'type' => 'text',
          'size' => 'medium',
          'not null' => FALSE,
          'serialize' => TRUE,
        ),
        'timestamp' => array(
          'description' => 'The Unix timestamp when the entry should be executed',
          'type' => 'int',
          'not null' => TRUE,
          'default' => 0,
        ),
      ),
      'indexes' => array(
        'type' => array('type'),
        'subject' => array('subject(30)'),
        'timestamp' => array('timestamp'),
      ),
      'primary key' => array('id'),
    ),
  );
}